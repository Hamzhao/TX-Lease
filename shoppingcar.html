<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="ie6" lang="zh-cn"><![endif]-->
<!--[if IE 7]>
<html class="ie7" lang="zh-cn"><![endif]-->
<!--[if IE 8]>
<html class="ie8" lang="zh-cn"><![endif]-->
<!--[if IE 9]>
<html class="ie9" lang="zh-cn"><![endif]-->
<!--[if gt IE 9]>
<html lang="zh-cn"><![endif]-->
<!--[if !IE]>-->
<html lang="zh-cn"><!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<title>腾新租赁</title>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<script src="js/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div id="header" class="clearfix">
			<div class="logo fl">
				<img src="img/logo.png"/>
			</div>
			<div class="header-text">
				<ul class="clearfix">
					<li style="border-right: solid 1px #E5E5E5;" class="fl cl3">亲!~<a href="login.html" class="cl3">[请登录]</a><a href="register.html" class="cl3">[免费注册]</a></li>
					<li class="Shopping_car fl cl3"><a href="shoppingcar.html" class="cl3">
						<img src="img/sp-car.png"/>
						<span>购物车(0)</span>
					</a></li>
					<li style="border-left: solid 1px #E5E5E5;"  class="fl cl3"><a href="help.html" class="cl3">帮助中心</a></li>
				</ul>
				<form action="" method="post">
					<input type="search" name="search" id="search" class="dsib" placeholder="你的搜索"/>
					<input type="submit" class="sch-btn dsib psa" value=""/>
				</form>
			</div>
		</div>
		<div id="nav">
			<ul>
				<a href="index.html"><li>首页</li></a>
				<a href="orders.html"><li>长租下单</li></a>
				<a href="javascript:void(0)"><li>短租下单</li></a>
				<a href="vipcenter.html"><li>会员中心</li></a>
			</ul>
		</div>
		<div id="body">
			<div class="pay">
				<div class="title"><input type="checkbox" name="all" id="all"/><span>全选</span><a class="deleteAll">[删除]</a><strong>租赁商品</strong></div>
				<div class="GoodsInfo" style="min-height: 675px;">
					<table border="">
						<tr>
							<th></th>
							<th>商品</th>
							<th></th>
							<th>起租日期</th>
							<th>租期(月)</th>
							<th>押金(元/台)</th>
							<th>月租金(元/台)</th>
							<th>数量</th>
							<th>小计(元)</th>
							<th>操作</th>
						</tr>
						<tr>
							<td><input type="checkbox" name="goods" value="" /></td>
							<td>
								<img src="img/boxing.jpg"/>
							</td>
							<td class="deepcolor">ThinkPad T420 极速版 14.0英寸笔记本电脑（i5/4GB/120GB SSD/集显）</td>
							<td>2016-06-15</td>
							<td>12</td>
							<td class="deepcolor yajin">2300</td>
							<td class="deepcolor zujin">200</td>
							<td class="deepcolor">
								<span class="numberInput">
                                	<input class="min" name="" type="button" value="-" />
            						<input type="text" class="input_val" name="input_val" value="1" />
            						<input class="add" name="" type="button" value="+" />
                            	</span>
							</td>
							<td>
								<label>租金</label>：<strong class="tzujin">￥200</strong>
								<br />
								<label>押金</label>：<strong class="tyajin">￥2300</strong>
							</td>
							<td><a href="javascript:void(0)" class="delete">删除</a></td>
						</tr>
						<tr>
							<td><input type="checkbox" name="goods" value="" /></td>
							<td>
								<img src="img/detail2.png"/>
							</td>
							<td class="deepcolor">ThinkPad T420 极速版 14.0英寸笔记本电脑（i5/4GB/120GB SSD/集显）</td>
							<td>2016-06-15</td>
							<td>12</td>
							<td class="deepcolor yajin">2300</td>
							<td class="deepcolor zujin">200</td>
							<td class="deepcolor">
								<span class="numberInput">
                                	<input class="min" name="" type="button" value="-" />
            						<input type="text" class="input_val" name="input_val" value="1" />
            						<input class="add" name="" type="button" value="+" />
                            	</span>
							</td>
							<td>
								<label>租金</label>：<strong class="tzujin">￥200</strong>
								<br />
								<label>押金</label>：<strong class="tyajin">￥2300</strong>
							</td>
							<td><a href="javascript:void(0)" class="delete">删除</a></td>
						</tr>
					</table>
					<div class="foot-all"><input type="checkbox" name="all" class="all"/><span>全选</span><a class="deleteAll">[删除]</a></div>
					<div class="amount">押金: <strong id="subyajin">0.00元</strong>   租金：<strong id="subzujin">0.00元/月</strong>   总金额：<strong id="totalPay">0.00元</strong></div>
					<a href="pay.html"><button class="goPay">去结算</button></a>
				</div>
				<div class="noGoods" style="width: 100%;height: 675px;line-height:675px;border:solid 1px #e1e1e1;font-size: 50px;text-align: center;color: #555;display: none;">
					亲，您的购物车为空...
				</div>
				<script type="text/javascript">
					$(function(){
	//商品加减计算
	$(".min").click(function(){
		var t = $(this).siblings(".input_val");
		if(t.val()<=1){
			return false;
		}
		t.val(parseInt(t.val())-1);
		setTotal();
		getCount();
	});
	$(".add").click(function(){
		var t = $(this).siblings(".input_val");
		t.val(parseInt(t.val())+1);
		setTotal();
		getCount();
	});
	
	//选中单个checkbox
	$("table tbody input[type='checkbox']").click(function(){
		setTotal();
		getCount();
	});
	
	//checkbox 全选反选
	$("#all,.all").click(function(){
		var t = $("input[type='checkbox']");
		if($(this).is(":checked")){
			t.prop("checked",true);
			$(".deleteAll").removeAttr("disabled").attr("onclick","deleteAll()").css({color:"red",cursor:"pointer"});
			setTotal();
			getCount();
		}else{
			t.prop("checked",false);
			$(".deleteAll").attr("disabled","disabled").removeAttr("onclick").css({color:"#555",cursor:"inherit"});
			setTotal();
			getCount();
		}
	});
	
	//删除商品
	var clickone = true;
	$(".delete").click(function(){
		if(clickone){
			var _this = $(this).parents("tr"), 
				z = _this.find(".tzujin").text();
				y = _this.find(".tyajin").text();
			if(!_this.find(":checkbox").is(":checked")){
				alert("请选择一个要删除的记录");return false;
			}
			$("#subzujin").text((parseInt($("#subzujin").text()) - parseInt(z)).toFixed(2) + "元/月");
    		$("#subyajin").text((parseInt($("#subyajin").text()) - parseInt(y)).toFixed(2) + "元");
			$("#totalPay").text((parseInt($("#totalPay").text()) - parseInt(z) - parseInt(y)).toFixed(2) + "元");
			clickone = false;
			_this.fadeOut(500,function(){
				_this.remove();
				clickone = true;
			});
		}
	});
	//手动输入
	$(".input_val").change(function(){
		setTotal();
		getCount();
	});
})
	
function deleteAll(){
//		$("input[name='goods']").parents("tr").remove();
 		$("#all").removeAttr("checked");
 		$(".deleteAll").attr("disabled","disabled").removeAttr("onclick").css({color:"#555",cursor:"inherit"});
 		$(".delete")
		$(".GoodsInfo").css("display","none");
		$(".noGoods").css("display","block");
	}
//单个商品总价
function setTotal(){
	var s = 0, r = 0,tr = $("table tbody tr");
	tr.each(function(index, element) {
		s = parseInt($(this).find("input[type='text']").val())*parseInt($(this).find(".zujin").text());
		r = parseInt($(this).find("input[type='text']").val())*parseInt($(this).find(".yajin").text());
		$(this).find(".tzujin").text(s.toFixed(2));
		$(this).find(".tyajin").text(r.toFixed(2));
    });
}

//总价
function getCount(){
	var count = 0,subzujin = 0,subyajin = 0;
	$("table tbody input[type='checkbox']").each(function(){
		if($(this).is(":checked")){
			subzujin+=parseInt($(this).parents("tr").find(".tzujin").text());
			subyajin+=parseInt($(this).parents("tr").find(".tyajin").text());
			count = subyajin + subzujin;
		}
    });
    $("#subzujin").text(subzujin.toFixed(2) + "元/月");
    $("#subyajin").text(subyajin.toFixed(2) + "元");
	$("#totalPay").text(count.toFixed(2) + "元");
}
setTotal();
				</script>
			</div>
		</div>
		<div id="footer">
			<div class="footLinkBox">
				<dl>
					<a href="javascript:void(0)"><dt>新手指南</dt></a>
					<a href="javascript:void(0)"><dd>新用户注册</dd></a>
					<a href="javascript:void(0)"><dd>会员登录</dd></a>
					<a href="javascript:void(0)"><dd>订购流程</dd></a>
					<a href="javascript:void(0)"><dd>交易须知</dd></a>
				</dl>
				<dl>
					<a href="javascript:void(0)"><dt>付款方式</dt></a>
					<a href="javascript:void(0)"><dd>支付方式</dd></a>
					<a href="javascript:void(0)"><dd>常见支付问题</dd></a>
					<a href="javascript:void(0)"><dd>如何办理退款</dd></a>
					<a href="javascript:void(0)"><dd>发票制度说明</dd></a>
				</dl>
				
				<dl>
					<a href="javascript:void(0)"><dt>配送方式</dt></a>
					<a href="javascript:void(0)"><dd>配送时间及范围</dd></a>
					<a href="javascript:void(0)"><dd>商品验收与签收</dd></a>
				</dl>
				
				<dl>
					<a href="javascript:void(0)"><dt>售后服务</dt></a>
					<a href="javascript:void(0)"><dd>如何办理退还货</dd></a>
					<a href="javascript:void(0)"><dd>退换货政策</dd></a>
				</dl>
				
				<dl>
					<a href="javascript:void(0)"><dt>帮助中心</dt></a>
					<a href="javascript:void(0)"><dd>找回密码</dd></a>
					<a href="javascript:void(0)"><dd>常见问题</dd></a>
					<a href="javascript:void(0)"><dd>谨防诈骗</dd></a>
				</dl>
			</div>
			<div class="copyright">
				<p><a href="javascript:void(0)">返回首页</a> | <a href="javascript:void(0)">联系我们</a> | <a href="javascript:void(0)">隐私条款</a> | <a href="javascript:void(0)">友情链接</a></p>
				<p>CopyRight &copy; 2007-2016 miracle 粤ICP备09011225号 NewPower Co. 版权所有</p>
			</div>
		</div>
	</body>
</html>